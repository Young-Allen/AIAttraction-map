{"version":3,"sources":["uni-app:///main.js","webpack:///F:/Studying Code/小程序/uni-map02/pages/road-map/road-map.vue?5b6e","webpack:///F:/Studying Code/小程序/uni-map02/pages/road-map/road-map.vue?7cd6","webpack:///F:/Studying Code/小程序/uni-map02/pages/road-map/road-map.vue?63a7","webpack:///F:/Studying Code/小程序/uni-map02/pages/road-map/road-map.vue?8e40","uni-app:///pages/road-map/road-map.vue","webpack:///F:/Studying Code/小程序/uni-map02/pages/road-map/road-map.vue?bd83","webpack:///F:/Studying Code/小程序/uni-map02/pages/road-map/road-map.vue?0e7f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","key","components","midTabbar","movableSwiper","xiaoStarComponent","zqsSelect","HmSmsListCard","cmdProgress","computed","normalList","circular","plus","watch","activePoint","data","pointCrowds","isGetLocation","isShowRoadContent","_mapContext","polyline","staticRoad","position","notice","options","checkPointList","onLoad","onReady","enableDefaultStyle","zoomOnClick","gridSize","longitude","latitude","methods","getStaticRoad","roadApi","i","from","to","setTimeout","that","dialogInputConfirm","console","addPointPolyline","qqmapsdk","mode","success","pl","coors","addPolyline","points","color","width","arrowLine","borderWidth","scanBtn","uni","title","duration","moveToLocation","iconPath","toPointDetail","url","clickCard","selectChange2","searchEvent","switchSpot","change","trigger","obj","pageTabL","icon","tapMap","pageTabML","pageTabMM","pageTabMR","addMarkers","markers","id","joinCluster","height","anchor","x","y","callout","content","borderRadius","bgColor","padding","textAlign","display","clear","complete","addGroundOverlay","src","bounds","southwest","northeast","markertap","primary","paybak","txt","score","side","setMapBoundary","scale"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,gWAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnFA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,4nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACgGtnB;AAGA;AAWA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAlBA;AACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAkBA;AACA;EACAC;AACA;AAAA,eAGA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC,sEAEA,gFACA,qGACA;IAEAC;MACA;QACAC;QACAC;MACA;IACA;EAAA,EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MAEAC;IACA;EACA;EAEAC;IACA;MACA;IACA,8CAEA;;IAGA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAEA;EAEAC;IACA;;IAEA;IACA;MACAC;MACAC;MACAC;IACA;;IAEA;IACA;MACA;MACAC;MACAC;IACA;MACA;MACAD;MACAC;IACA;;IAEA;IACA;;IAEA;IACA;EACA;EAEAC,qEACA,6GACA,+DACA;IAEA;IACAC;MAAA;MACA;MACAC;QACA;QACA;QAAA,2BACAC;UACA;YACAC;UACA;YACAC;cACAP;cACAC;YACA;UACA;YACAM;cACAP;cACAC;YACA;UACA;UACA;YACAK;cACAN;cACAC;YACA;UACA;YACAK;cACAN;cACAC;YACA;UACA;UACA;UACAO;YACAC;UACA;QAAA;QA5BA;UAAA;QA6BA;MACA;IACA;IAEAC;MACAC;;MAEA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACAC;QACAC;QAAA;QACAR;QACAC;QACAQ;UACAJ;UACA;YACAK;UACA;UACA;YACAC;UACA;UACA;UACA;YACAD;cACAf;cACAD;YACA;UACA;UACAS;QACA;MACA;IACA;IAEA;IACAS;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACAC;QACAV;UACAN;UACAgB;YACAC;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAC;MACAjB;MACA;QACAX;QACAC;MACA;MACA;QACA4B;MACA;IACA;IAEA;IACAC;MACAL;QACAM;MACA;IACA;IAEA;IACAC;MACArB;MACAc;QACAM;MACA;IACA;IAEAE;MACA;IAAA,CACA;IAEAC;MACAvB;MACA;IACA;IAEAwB;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACA;IACA;IACA;IACA;IAEA;IACAC;MACA;QACA;UACAC;QACA;QACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACAd;QACAV;UACA;YACAd;YACAD;UACA;UACA;UACAnC;YACAkE;YACAhB;cACA;cACA;cACA;gBACAN;gBACAE;cACA;gBACAF;gBACAgB;kBACAC;kBACAC;kBACAa;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA9B;MACA;QACA;QACA;MACA;IACA;IAEA;IACA+B;MACA/B;MACAc;QACAM;MACA;IACA;IAEA;IACAY;MACAlB;QACAM;MACA;IACA;IAEA;IACAa;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACAC;UACAC;UACArB;UACAzB;UACAD;UACAgD;UACAnB;UACAR;UACA4B;UACAC;YACAC;YACAC;UACA;UACAC;YACAC;YACAlC;YACA;YACAmC;YACAC;YACA;YACAC;YACAC;YACAC;UACA;QACA;MACA;MAEA;QACAb;QACAc;QACAC;UACAlD;QACA;MACA;IACA;IAEA;IACAmD;MACA;QACAf;QACAgB;QACAC;UACA;UACAC;YACAjE;YACAC;UACA;UACA;UACAiE;YACAlE;YACAC;UACA;QACA;MACA;MACA;QACA8C;QACAgB;QACAC;UACA;UACAC;YACAjE;YACAC;UACA;UACA;UACAiE;YACAlE;YACAC;UACA;QACA;MACA;MACA;QACA8C;QACAgB;QACAC;UACA;UACAC;YACAjE;YACAC;UACA;UACA;UACAiE;YACAlE;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAkE;MACAxD;MACA;QAAA;MAAA;MACAA;MACA;QACAyD;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACAR;QACAC;QACAnD;UACAN;YACAR;YACAD;YACA0E;UACA;QACA;MACA;IACA;EAAA;AAIA;AAAA,2B;;;;;;;;;;;;;ACtkBA;AAAA;AAAA;AAAA;AAA6oC,CAAgB,mnCAAG,EAAC,C;;;;;;;;;;;ACAjqC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/road-map/road-map.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/road-map/road-map.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./road-map.vue?vue&type=template&id=0b664b66&\"\nvar renderjs\nimport script from \"./road-map.vue?vue&type=script&lang=js&\"\nexport * from \"./road-map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./road-map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/road-map/road-map.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./road-map.vue?vue&type=template&id=0b664b66&\"","var components\ntry {\n  components = {\n    lTabs: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/l-tabs/components/l-tabs/l-tabs\" */ \"@/uni_modules/l-tabs/components/l-tabs/l-tabs.vue\"\n      )\n    },\n    uniNoticeBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar\" */ \"@/uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar.vue\"\n      )\n    },\n    uniFab: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-fab/components/uni-fab/uni-fab\" */ \"@/uni_modules/uni-fab/components/uni-fab/uni-fab.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniSteps: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-steps/components/uni-steps/uni-steps\" */ \"@/uni_modules/uni-steps/components/uni-steps/uni-steps.vue\"\n      )\n    },\n    movableSwiper: function () {\n      return import(\n        /* webpackChunkName: \"components/movable-swiper/movable-swiper\" */ \"@/components/movable-swiper/movable-swiper.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    zqsSelect: function () {\n      return import(\n        /* webpackChunkName: \"components/zqs-select/zqs-select\" */ \"@/components/zqs-select/zqs-select.vue\"\n      )\n    },\n    cmdProgress: function () {\n      return import(\n        /* webpackChunkName: \"components/cmd-progress/cmd-progress\" */ \"@/components/cmd-progress/cmd-progress.vue\"\n      )\n    },\n    uniPopupDialog: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog\" */ \"@/uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.vue\"\n      )\n    },\n    uniRate: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-rate/components/uni-rate/uni-rate\" */ \"@/uni_modules/uni-rate/components/uni-rate/uni-rate.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./road-map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./road-map.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"content\">\r\n    <!-- 顶部导航栏 -->\r\n    <l-tabs :list=\"headNavi\" activeTextColor=\"#4d4d4d\" textColor=\"#ffffff\" layout=\"scroll\" :lineShow=\"true\"\r\n      :lineCrude=\"6\" labelPadding=\"10\" bk=\"#47a6ff\" activeSize=\"16\" linePlace=\"30px\"\r\n      lineColor=\"linear-gradient(to right, #FF8008, 30%, #ffc837)\">\r\n    </l-tabs>\r\n\r\n    <!-- 通知栏 -->\r\n    <uni-notice-bar v-if=\"notice !== ''\" show-icon scrollable :text=\"notice\" />\r\n\r\n    <!-- 扫一扫 -->\r\n    <view class=\"scanBtn\" @click=\"scanBtn\">\r\n      <image src=\"~@/static/my-icons/scan1.png\" mode=\"\" style=\"width: 40px;height: 40px;\"></image>\r\n    </view>\r\n\r\n    <!-- 路线选择 -->\r\n    <uni-fab ref=\"fab\" :contentPath=\"roadContent\" :horizontal=\"'right'\" :direction=\"'vertical'\"\r\n      :show=\"isShowRoadContent\" @trigger=\"trigger\" />\r\n    <!-- 弹出框，具体路线信息 -->\r\n    <uni-popup ref=\"roadMsg\" type=\"bottom\">\r\n      <view style=\"background-color: white; border-radius: 20px 20px 0px 0px; height: 400rpx;\">\r\n        <!-- <vgt-tab :list=\"roadNameList\" @onValueChange=\"onValueChange\"></vgt-tab> -->\r\n        <view class=\"scenicCon\">\r\n          <!-- 景点进度条 -->\r\n          <uni-steps :options=\"staticRoad.roadList\" :active=\"activePoint\" @switchSpot=\"switchSpot\"></uni-steps>\r\n          <!-- 景点卡片 -->\r\n          <movable-swiper v-if=\"staticRoad.roadList !== undefined\" ref=\"movableSwiper\" :dataList=\"staticRoad.roadList\"\r\n            :height=\"'150rpx'\" style=\"margin-top: 30px;\">\r\n            <template v-slot=\"{movSlotData}\">\r\n              <view v-if=\"movSlotData\" class=\"pointBox\">\r\n                <image class=\"pointBox_primary\" mode=\"scaleToFill\" :src=\"movSlotData.imgsUrl\" />\r\n                <view class=\"pointBox_msg\">\r\n                  <text style=\"font-size: 15px; font-weight: 600; display: block;\">{{movSlotData.name}}</text>\r\n                  <xiaoStarComponent :starCount=\"movSlotData.score\"></xiaoStarComponent>\r\n                  <view class=\"more\" @click=\"toPointDetail\">\r\n                    <text>详情</text>\r\n                    <image style=\"width: 20px;height: 20px;\" :src=\"'/static/my-icons/goIcon.png'\" />\r\n                  </view>\r\n                </view>\r\n                <view class=\"midmid\"\r\n                  @click=\"moveToLocation({longitude: movSlotData.longitude, latitude: movSlotData.latitude })\">\r\n                  <uni-icons class=\"fab-circle-icon\" type=\"navigate\" size=\"32\"></uni-icons>\r\n                  <text style=\"font-size: 10px;\">到这里去</text>\r\n                </view>\r\n              </view>\r\n            </template>\r\n          </movable-swiper>\r\n        </view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n    <!-- :enable-poi=\"false\"-->\r\n    <map id=\"map\" class=\"map\" scale=\"18\" min-scale=\"12\" max-scale=\"15\" :show-location=\"true\" :polyline=\"polyline\"\r\n      :enable-poi=\"false\" :latitude=\"'29.565137170757925'\" :longitude=\"'115.9703530452523'\" @markertap=\"markertap\"\r\n      @tap=\"tapMap\">\r\n    </map>\r\n\r\n    <!-- 中间导航岛组件 -->\r\n    <midTabbar @pageTabL=\"pageTabL\" @pageTabML=\"pageTabML\" @pageTabMM=\"pageTabMM\" @pageTabMR=\"pageTabMR\"></midTabbar>\r\n    <!-- 筛选想去的景点界面 -->\r\n    <zqs-select :list=\"allPointList\" label-key=\"title\" value-key=\"pointId\" v-show=\"isShowModal=='true'\"\r\n      v-model=\"checkPointList\" @search=\"searchEvent\" @change=\"selectChange2\"></zqs-select>\r\n\r\n    <!-- 弹出框，景点简介 -->\r\n    <uni-popup ref=\"popupHi\" type=\"bottom\">\r\n      <view style=\"background-color: white; border-radius: 20px 20px 0px 0px; height: 400rpx;\">\r\n        <view style=\"padding-top: 5px\">\r\n          <hm-sms-list-card :options=\"options\" :isShowRate=\"false\" @click.native=\"clickCard\"></hm-sms-list-card>\r\n          <view style=\"display: flex;justify-content: center;position: relative;\">\r\n            <text style=\"position: absolute; left: 20px; top: 20px; color: #47a6ff; font-weight: 700;\"> 景点当前人数</text>\r\n            <cmd-progress type=\"circle\" :percent=\"3.33/ 20 * 100\" stroke-color=\"#47a6ff\" :stroke-width=\"12\" :width=\"70\"\r\n              :showInfo=\"false\"></cmd-progress>\r\n            <view style=\"position: absolute;text-align: center;top: 45%;\">\r\n              <view style=\"font-size:15rpx;\">500/700</view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n    <!-- 扫码好评 -->\r\n    <uni-popup ref=\"inputDialog\" type=\"dialog\">\r\n      <uni-popup-dialog ref=\"inputClose\" mode=\"input\" title=\"评价一下当前景点吧!\" @confirm=\"dialogInputConfirm\">\r\n        三叠泉：\r\n        <uni-rate allow-half :value=\"3.5\" />\r\n      </uni-popup-dialog>\r\n    </uni-popup>\r\n\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  const img = '../../static/place_icons/place02.png';\r\n  const img1 = 'https://i.328888.xyz/2023/03/25/iAjKKQ.png';\r\n  const img2 = '../../static/mapborder.png';\r\n  import {\r\n    getSwiperList\r\n  } from '@/components/sn-swiper/esc-swiper/helper.js';\r\n  import {\r\n    mapGetters,\r\n    mapState,\r\n    mapMutations\r\n  } from 'vuex'\r\n  import midTabbar from '@/components/map_tabbar/map_tabbar.vue'\r\n  import movableSwiper from '@/components/movable-swiper/movable-swiper.vue'\r\n  import xiaoStarComponent from '@/components/xiao-star-component/xiao-star-component.vue'\r\n  import zqsSelect from '@/components/zqs-select/zqs-select.vue'\r\n  import HmSmsListCard from '@/components/hm-sms-list-card/index.vue'\r\n  import cmdProgress from \"@/components/cmd-progress/cmd-progress.vue\"\r\n  import roadApi from '@/api/roadApi.js'\r\n  import userApi from '../../api/userApi.js';\r\n\r\n  const QQMapWX = require('../../libs/qqmap-wx-jssdk.js');\r\n  const qqmapsdk = new QQMapWX({\r\n    key: 'K7JBZ-VCBHQ-ET554-4CBVM-YLCXT-MGFNJ'\r\n  });\r\n\r\n\r\n  export default {\r\n    components: {\r\n      midTabbar,\r\n      movableSwiper,\r\n      xiaoStarComponent,\r\n      zqsSelect,\r\n      HmSmsListCard,\r\n      cmdProgress\r\n    },\r\n    computed: {\r\n      //默认的一些配置的数据\r\n      ...mapState('m_settings', ['headNavi', 'roadContent', 'isShowModal']),\r\n      ...mapState('m_roadMsg', ['activePoint', 'roadList', 'pointList', 'allPointList', 'road']),\r\n      ...mapState('m_user', ['userPosition', 'token', 'userinfo']),\r\n\r\n      normalList() {\r\n        return getSwiperList(this.swiperList, {\r\n          circular: this.circular,\r\n          plus: this.plus\r\n        });\r\n      },\r\n    },\r\n    watch: {\r\n      activePoint(newIndex, oldIndex) {\r\n        this.moveToLocation(this.staticRoad.roadList[newIndex])\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        pointCrowds: 50,\r\n        isGetLocation: false,\r\n        isShowRoadContent: false,\r\n        //map上下文对象\r\n        _mapContext: '',\r\n        //路线数组\r\n        polyline: [],\r\n        //静态路线\r\n        staticRoad: {},\r\n        //当前定位的位置信息\r\n        position: {},\r\n        //消息\r\n        notice: \"\",\r\n        //点击景点弹出的详情弹框信息\r\n        options: {},\r\n\r\n        checkPointList: [],\r\n      }\r\n    },\r\n\r\n    onLoad(option) {\r\n      if (option.showStaticRoad === 'true') {\r\n        this.getStaticRoad(option.staticRoadId);\r\n      } else if (option.showStaticRoad === 'true') {\r\n\r\n      }\r\n\r\n\r\n      // uni.connectSocket({\r\n      //   url: 'ws://100.66.108.73:8000/contact/' + this.userinfo.id,\r\n      //   header: {\r\n      //     'authorization': this.token,\r\n      //   },\r\n      //   success: function(res) {\r\n      //     console.log(res);\r\n      //   },\r\n      // });\r\n      // uni.onSocketOpen(function(res) {\r\n      //   console.log('WebSocket连接已打开！');\r\n      // });\r\n      // uni.onSocketMessage(function(res) {\r\n      //   console.log('收到服务器内容：' + res.data);\r\n      //   this.notice = res.data.content\r\n      // });\r\n\r\n    },\r\n\r\n    onReady() {\r\n      this._mapContext = uni.createMapContext(\"map\", this);\r\n\r\n      // 仅调用初始化，才会触发 on.(\"markerClusterCreate\", (e) => {})\r\n      this._mapContext.initMarkerCluster({\r\n        enableDefaultStyle: false,\r\n        zoomOnClick: true,\r\n        gridSize: 40,\r\n      });\r\n\r\n      //限制地图移动范围\r\n      this.setMapBoundary({\r\n        //southwest\r\n        longitude: 115.955964,\r\n        latitude: 29.493921\r\n      }, {\r\n        //northeast\r\n        longitude: 116.055004,\r\n        latitude: 29.576550\r\n      })\r\n\r\n      //加标记点到地图上\r\n      this.addMarkers();\r\n\r\n      //加上手绘地图\r\n      this.addGroundOverlay();\r\n    },\r\n\r\n    methods: {\r\n      ...mapMutations('m_roadMsg', ['saveActivePointToStorage', 'updateActivePoint', 'updatePointList']),\r\n      ...mapMutations('m_settings', ['updateIsShowModal']),\r\n      ...mapMutations('m_user', ['saveUserPositionToStorage', 'updateUserPosition']),\r\n\r\n      //获取静态路线\r\n      getStaticRoad(id) {\r\n        let that = this\r\n        roadApi.getStaticRoadById(id).then(res => {\r\n          this.staticRoad = res.data\r\n          this.$refs.roadMsg.open()\r\n          for (let i = 0; i < this.staticRoad.roadList.length - 1; i++) {\r\n            let to = {},\r\n              from = {};\r\n            if (this.staticRoad.roadList[i + 1].name === \"三叠泉\") {\r\n              to = {\r\n                longitude: '116.024443',\r\n                latitude: '29.560302'\r\n              }\r\n            } else {\r\n              to = {\r\n                longitude: this.staticRoad.roadList[i + 1].longitude,\r\n                latitude: this.staticRoad.roadList[i + 1].latitude\r\n              }\r\n            }\r\n            if (this.staticRoad.roadList[i].name === \"三叠泉\") {\r\n              from = {\r\n                longitude: '116.024443',\r\n                latitude: '29.560302'\r\n              }\r\n            } else {\r\n              from = {\r\n                longitude: this.staticRoad.roadList[i].longitude,\r\n                latitude: this.staticRoad.roadList[i].latitude\r\n              }\r\n            }\r\n            //非企业用户限制并发访问量为5次/秒，设置延时访问\r\n            setTimeout(function() {\r\n              that.addPointPolyline(from, to)\r\n            }, ((i / 4) - 1) * 10000);\r\n          }\r\n        })\r\n      },\r\n\r\n      dialogInputConfirm(val) {\r\n        console.log(val);\r\n\r\n        // 关闭窗口后，恢复默认内容\r\n        this.$refs.inputDialog.close()\r\n      },\r\n\r\n      //获取两点之间的聚合点，为添加两点之间的路线使用\r\n      addPointPolyline(from, to) {\r\n        var that = this;\r\n        //调用距离计算接口\r\n        qqmapsdk.direction({\r\n          mode: 'walking', //可选值：'driving'（驾车）、'walking'（步行）、'bicycling'（骑行），不填默认：'driving',可不填\r\n          from,\r\n          to,\r\n          success: function(res) {\r\n            console.log(res.result.routes[0]);\r\n            var coors = res.result.routes[0].polyline,\r\n              pl = [];\r\n            //坐标解压（返回的点串坐标，通过前向差分进行压缩）\r\n            for (var i = 2; i < coors.length; i++) {\r\n              coors[i] = Number(coors[i - 2]) + Number(coors[i]) / 1000000;\r\n            }\r\n            //将解压后的坐标放入点串数组pl中\r\n            for (var i = 0; i < coors.length; i += 2) {\r\n              pl.push({\r\n                latitude: coors[i],\r\n                longitude: coors[i + 1]\r\n              })\r\n            }\r\n            that.addPolyline(pl)\r\n          },\r\n        });\r\n      },\r\n\r\n      //添加聚合点之间的路线\r\n      addPolyline(points) {\r\n        this.polyline.push({\r\n          points: points,\r\n          color: \"#47a6ff\",\r\n          width: 5,\r\n          arrowLine: true,\r\n          borderWidth: 1 //线的边框宽度，还有很多参数，请看文档 \r\n        })\r\n      },\r\n\r\n      //点击扫一扫\r\n      scanBtn() {\r\n        let that = this\r\n        // 允许从相机和相册扫码\r\n        uni.scanCode({\r\n          success: function(res) {\r\n            that.$refs.inputDialog.open()\r\n            uni.showToast({\r\n              title: '条码内容：' + res.result,\r\n              duration: 2000\r\n            })\r\n          }\r\n        });\r\n      },\r\n\r\n      //将地图中心移置当前定位点\r\n      moveToLocation(e) {\r\n        console.log(e);\r\n        this._mapContext.moveToLocation({\r\n          longitude: parseFloat(e.longitude),\r\n          latitude: parseFloat(e.latitude),\r\n        })\r\n        this._mapContext.setLocMarkerIcon({\r\n          iconPath: '../../static/place_icons/locPosition.png'\r\n        })\r\n      },\r\n\r\n      //路线页面点击详情跳转景点\r\n      toPointDetail() {\r\n        uni.navigateTo({\r\n          url: '/subpkg/sub_pointDetail/sub_pointDetail'\r\n        })\r\n      },\r\n\r\n      //点击景点卡片跳转详情页面\r\n      clickCard(e) {\r\n        console.log(e);\r\n        uni.navigateTo({\r\n          url: '/subpkg/sub_pointDetail/sub_pointDetail'\r\n        })\r\n      },\r\n\r\n      selectChange2() {\r\n        // 此处为点击的事件\r\n      },\r\n\r\n      searchEvent(val) {\r\n        console.log('查询事件参数', val)\r\n        // 此处把新的请求值 赋值给options\r\n      },\r\n\r\n      switchSpot(e) {\r\n        this.updateActivePoint(e)\r\n      },\r\n\r\n      // 改变路线当前景点信息\r\n      change() {\r\n        if (this.activePoint < this.pointList.length - 1) {\r\n          this.activePoint += 1\r\n        } else {\r\n          this.activePoint = 0\r\n        }\r\n      },\r\n\r\n      //选中路线事件\r\n      // onValueChange(e) {\r\n      //   this.updatePointList(e.currentItem)\r\n      //   console.log(e);\r\n      // },\r\n\r\n      //展开菜单点击事件，返回点击信息\r\n      trigger(e) {\r\n        if (this.roadContent[e.index].active === false) {\r\n          this.roadContent.forEach(obj => {\r\n            obj.active = false\r\n          })\r\n          this.roadContent[e.index].active = !e.item.active\r\n        }\r\n        this.$refs.roadMsg.open()\r\n        this.$refs.fab.changeHide();\r\n      },\r\n\r\n      //点击导航岛最左侧,设置当前定位\r\n      pageTabL() {\r\n        let that = this\r\n        uni.getFuzzyLocation({\r\n          success: function(res) {\r\n            let pos = {\r\n              latitude: res.latitude,\r\n              longitude: res.longitude\r\n            }\r\n            // 2. 调用腾讯地图API查询位置所在城市\r\n            wx.request({\r\n              url: `https://apis.map.qq.com/ws/geocoder/v1/?location=${pos.latitude},${pos.longitude}&key=K7JBZ-VCBHQ-ET554-4CBVM-YLCXT-MGFNJ`,\r\n              success(res) {\r\n                const city = res.data.result.address_component.city;\r\n                // 3. 判断是否在庐山市\r\n                if (city.includes('庐山市')) {\r\n                  that.position = pos\r\n                  console.log('当前位置在庐山市内');\r\n                } else {\r\n                  that.isGetLocation = true\r\n                  uni.showToast({\r\n                    title: '您当前的位置不在景区内请点击地图设置当前位置',\r\n                    duration: 4000,\r\n                    icon: 'none'\r\n                  })\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n\r\n      //点击地图获取经纬度\r\n      tapMap(e) {\r\n        this.viewshow = false // 隐藏信息框F\r\n        console.log('点击返回经纬度:', e.detail)\r\n        if (this.isGetLocation) {\r\n          this.position = e.detail\r\n          this.isGetLocation = false\r\n        }\r\n      },\r\n\r\n      //点击导航岛中间左侧，跳转加团页面\r\n      pageTabML() {\r\n        console.log(\"pageTabML\");\r\n        uni.navigateTo({\r\n          url: '/subpkg/sub_addToGroup/sub_addToGroup'\r\n        })\r\n      },\r\n\r\n      //点击导航岛中间，跳转消息页面\r\n      pageTabMM() {\r\n        uni.navigateTo({\r\n          url: '/subpkg/sub_message/sub_message'\r\n        })\r\n      },\r\n\r\n      //点击导航岛中间右侧\r\n      pageTabMR() {\r\n        this.updateIsShowModal('true')\r\n      },\r\n\r\n      //给地图添加标记点  \r\n      addMarkers() {\r\n        const markers = []\r\n        this.allPointList.forEach((p, i) => {\r\n          markers.push({\r\n            id: p.id,\r\n            title: p.name,\r\n            latitude: p.latitude,\r\n            longitude: p.longitude,\r\n            joinCluster: true,\r\n            iconPath: img,\r\n            width: 25,\r\n            height: 25,\r\n            anchor: {\r\n              x: .5,\r\n              y: .5\r\n            },\r\n            callout: {\r\n              content: p.name,\r\n              color: '#666',\r\n              // fontSize: 15,\r\n              borderRadius: 5,\r\n              bgColor: this.pointCrowds > 70 ? '#f0a1a8' : '#ffffff',\r\n              // borderWidth: 10, \r\n              padding: 5,\r\n              textAlign: 'center',\r\n              display: 'ALWAYS',\r\n            },\r\n          })\r\n        })\r\n\r\n        this._mapContext.addMarkers({\r\n          markers,\r\n          clear: false,\r\n          complete(res) {\r\n            console.log('addMarkers', res)\r\n          }\r\n        })\r\n      },\r\n\r\n      //给地图添加自定义图层\r\n      addGroundOverlay() {\r\n        this._mapContext.addGroundOverlay({\r\n          id: 1,\r\n          src: img1,\r\n          bounds: {\r\n            //左下经纬度\r\n            southwest: {\r\n              longitude: 115.955964,\r\n              latitude: 29.493921,\r\n            },\r\n            //右上经纬度\r\n            northeast: {\r\n              longitude: 116.055004,\r\n              latitude: 29.576550,\r\n            }\r\n          },\r\n        });\r\n        this._mapContext.addGroundOverlay({\r\n          id: 2,\r\n          src: img2,\r\n          bounds: {\r\n            //左下经纬度\r\n            southwest: {\r\n              longitude: 115.955964,\r\n              latitude: 29.576550,\r\n            },\r\n            //右上经纬度\r\n            northeast: {\r\n              longitude: 116.055004,\r\n              latitude: 29.626550,\r\n            }\r\n          },\r\n        });\r\n        this._mapContext.addGroundOverlay({\r\n          id: 3,\r\n          src: img2,\r\n          bounds: {\r\n            //左下经纬度\r\n            southwest: {\r\n              longitude: 115.955964,\r\n              latitude: 29.443921,\r\n            },\r\n            //右上经纬度\r\n            northeast: {\r\n              longitude: 116.055004,\r\n              latitude: 29.493921,\r\n            }\r\n          },\r\n        });\r\n      },\r\n\r\n      //markers点击事件，点击标记点事件\r\n      markertap(e) {\r\n        console.log(\"你点击的标记点ID是:\" + e.detail.markerId)\r\n        const pos = this.allPointList.find(item => item.id === e.detail.markerId)\r\n        console.log(pos);\r\n        this.options = {\r\n          primary: pos.imgsUrl,\r\n          paybak: pos.name,\r\n          txt: '详情',\r\n          score: pos.score,\r\n          side: '/static/hm-sms-list-card/images/img_25832_0_0.png'\r\n        }\r\n        this.$refs.popupHi.open()\r\n      },\r\n\r\n      //限制地图移动范围\r\n      setMapBoundary(southwest, northeast) {\r\n        let that = this\r\n        this._mapContext.setBoundary({\r\n          southwest,\r\n          northeast,\r\n          success: function(res) {\r\n            that._mapContext.moveToLocation({\r\n              latitude: (southwest.latitude + northeast.latitude) / 2,\r\n              longitude: (southwest.longitude + northeast.longitude) / 2,\r\n              scale: 15\r\n            })\r\n          }\r\n        })\r\n      },\r\n\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import './road_map.scss';\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./road-map.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./road-map.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681135649123\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}