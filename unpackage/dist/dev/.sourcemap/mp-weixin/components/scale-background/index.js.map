{"version":3,"sources":[null,"webpack:///F:/Studying Code/小程序/uni-map02/components/scale-background/index.vue?6a8a","webpack:///F:/Studying Code/小程序/uni-map02/components/scale-background/index.vue?e3ce","webpack:///F:/Studying Code/小程序/uni-map02/components/scale-background/index.vue?4835","uni-app:///components/scale-background/index.vue","webpack:///F:/Studying Code/小程序/uni-map02/components/scale-background/index.vue?9b2b","webpack:///F:/Studying Code/小程序/uni-map02/components/scale-background/index.vue?7ce0"],"names":["step","type","default","top","backgroundSize","paddingTop","baseRate","clientMoveY","scrollTop","timer","state","Array","reference","parentElements","item","handleMove","clearInterval","handleEnd"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACoE;AACL;AAC0B;;;AAGzF;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA0mB,CAAgB,ooBAAG,EAAC,C;;;;;;;;;;;;;;ACgB9nB;AACA;;;;;;;;;;;;;;;;;AAEA;EACA;EACAA;IACAC;IACAC;EACA;EACA;EACAC;IACAF;IACAC;EACA;AACA;;AAEA;AACA;AAEA;EACAE;EACAC;EACAC;EACAC;EACAC;EACAC;AACA;;AAEA;AACA;EACAC;AACA;;AAEA;AACA;EAAA;EAAA,OACAC,gCACAC,yHACAA,iPACAA,oVACA;AAAA,EACA;;AAEA;AACA;EACAC;IACAC;IACAA;EACA;AACA;;AAEA;AACA;EACAD;IACAC;IACAA;EACA;AACA;;AAEA;AACA;EACA;EACA;IACA;EACA;EACA;EACA;EACA;EACA;IACAJ;IACAA;IACAA;EACA;EACAA;EACAK;AACA;;AAEA;AACA;EACA;EACA;IACA;EACA;EACAL;EACA;EACAA;IACAA;IACA;MACAA;MACAA;MACAM;IACA;IACAN;IACAA;EACA;EACAO;AACA;AAEA;EAAAb;EAAAC,gC;;;;;;;;;;;;ACjHA;AAAA;AAAA;AAAA;AAAy4B,CAAgB,04BAAG,EAAC,C;;;;;;;;;;;ACA75B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/scale-background/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=47c81862&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=47c81862&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47c81862\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/scale-background/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=47c81862&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&setup=true&lang=js&\"","<template>\r\n  <div\r\n    ref=\"reference\"\r\n    class=\"scale-background\"\r\n    :style=\"{\r\n      backgroundSize: `${backgroundSize}% auto`,\r\n      paddingTop: paddingTop + 'px'\r\n    }\"\r\n    @touchend=\"touchend\"\r\n    @touchmove=\"touchmove\"\r\n  >\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, toRefs, ref, computed } from 'vue'\r\nimport { onPageScroll } from '@dcloudio/uni-app'\r\n\r\nconst props = defineProps({\r\n  // 动画步长\r\n  step: {\r\n    type: Number,\r\n    default: 2\r\n  },\r\n  // 顶部距离\r\n  top: {\r\n    type: Number,\r\n    default: 190\r\n  }\r\n})\r\n\r\n// 当前页面元素\r\nconst reference = ref()\r\n\r\nconst state = reactive({\r\n  backgroundSize: 100,\r\n  paddingTop: props.top,\r\n  baseRate: 100,\r\n  clientMoveY: 0,\r\n  scrollTop: 0,\r\n  timer: null\r\n})\r\n\r\n// 监听页面滚动\r\nonPageScroll(e => {\r\n  state.scrollTop = e.scrollTop\r\n})\r\n\r\n// 拿到页面父元素\r\nconst parentElements = computed(() =>\r\n  Array.from([\r\n    reference.value?.parentElement,\r\n    reference.value?.parentElement?.parentElement,\r\n    reference.value?.parentElement?.parentElement?.parentElement\r\n  ])\r\n)\r\n\r\n//  开始时处理页面滚动\r\nconst handleMove = () => {\r\n  parentElements.value.forEach(item => {\r\n    item && (item.style.height = '100vh')\r\n    item && (item.style.overflow = 'hidden')\r\n  })\r\n}\r\n\r\n//  结束时处理页面滚动\r\nconst handleEnd = () => {\r\n  parentElements.value.forEach(item => {\r\n    item && (item.style.height = '')\r\n    item && (item.style.overflow = '')\r\n  })\r\n}\r\n\r\n// 监听移动\r\nconst touchmove = e => {\r\n  // 页面不在顶部不调用\r\n  if (state.scrollTop !== 0) {\r\n    return\r\n  }\r\n  const touchData = e.changedTouches[0]\r\n  const { clientY } = touchData\r\n  // 判断下拉\r\n  if (state.clientMoveY - clientY < 0) {\r\n    state.baseRate = state.baseRate + props.step\r\n    state.backgroundSize = state.baseRate\r\n    state.paddingTop = props.top * (state.baseRate / 100)\r\n  }\r\n  state.clientMoveY = clientY\r\n  handleMove()\r\n}\r\n\r\n// 监听移动结束\r\nconst touchend = () => {\r\n  // 页面不在顶部不调用\r\n  if (state.scrollTop !== 0) {\r\n    return\r\n  }\r\n  state.timer && clearInterval(state.timer)\r\n  // 回弹\r\n  state.timer = setInterval(() => {\r\n    state.baseRate = state.baseRate - props.step * 2\r\n    if (state.baseRate <= 100) {\r\n      state.baseRate = 100\r\n      state.paddingTop = props.top\r\n      clearInterval(state.timer)\r\n    }\r\n    state.backgroundSize = state.baseRate\r\n    state.paddingTop = props.top * (state.baseRate / 100)\r\n  }, 16)\r\n  handleEnd()\r\n}\r\n\r\nconst { backgroundSize, paddingTop } = toRefs(state)\r\n</script>\r\n\r\n<style scoped>\r\n.scale-background {\r\n  background-repeat: no-repeat;\r\n  background-position: top center;\r\n  background-size: 100% auto;\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=47c81862&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=47c81862&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1679749764262\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}