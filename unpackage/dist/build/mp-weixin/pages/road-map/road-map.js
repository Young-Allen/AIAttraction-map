(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/road-map/road-map"],{"2d59":function(t,n,e){},"3e3e":function(t,n,e){"use strict";e.r(n);var o=e("5b54"),i=e("d888");for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(a);e("fc32");var s=e("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=u.exports},4422:function(t,n,e){"use strict";(function(t,n){var o=e("4ea4");e("beb8");o(e("66fd"));var i=o(e("3e3e"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(i.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},"5b54":function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}));var o={lTabs:function(){return e.e("uni_modules/l-tabs/components/l-tabs/l-tabs").then(e.bind(null,"c920"))},uniNoticeBar:function(){return e.e("uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar").then(e.bind(null,"c63f"))},uniFab:function(){return e.e("uni_modules/uni-fab/components/uni-fab/uni-fab").then(e.bind(null,"8274"))},uniPopup:function(){return e.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(e.bind(null,"9d89"))},uniSteps:function(){return e.e("uni_modules/uni-steps/components/uni-steps/uni-steps").then(e.bind(null,"0b07"))},movableSwiper:function(){return e.e("components/movable-swiper/movable-swiper").then(e.bind(null,"9b1a"))},uniIcons:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(e.bind(null,"d072"))},zqsSelect:function(){return e.e("components/zqs-select/zqs-select").then(e.bind(null,"6efd"))},uniPopupDialog:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(e.bind(null,"01b7"))},uniRate:function(){return e.e("uni_modules/uni-rate/components/uni-rate/uni-rate").then(e.bind(null,"b9549"))}},i=function(){var t=this.$createElement;this._self._c},a=[]},cd0f:function(t,n,e){"use strict";(function(t){var o=e("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("2eee")),a=o(e("c973")),s=o(e("9523")),u=e("8a87"),r=o(e("41f1")),c=e("26cb");o(e("1253"));function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}function d(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){(0,s.default)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var p="../../static/mapborder.png",f=e("e67a"),h=new f({key:"K7JBZ-VCBHQ-ET554-4CBVM-YLCXT-MGFNJ"}),m={components:{midTabbar:function(){e.e("components/map_tabbar/map_tabbar").then(function(){return resolve(e("e0b7"))}.bind(null,e)).catch(e.oe)},movableSwiper:function(){e.e("components/movable-swiper/movable-swiper").then(function(){return resolve(e("9b1a"))}.bind(null,e)).catch(e.oe)},xiaoStarComponent:function(){e.e("components/xiao-star-component/xiao-star-component").then(function(){return resolve(e("45bb"))}.bind(null,e)).catch(e.oe)},zqsSelect:function(){e.e("components/zqs-select/zqs-select").then(function(){return resolve(e("6efd"))}.bind(null,e)).catch(e.oe)},HmSmsListCard:function(){e.e("components/hm-sms-list-card/index").then(function(){return resolve(e("e665"))}.bind(null,e)).catch(e.oe)}},computed:d(d(d(d({},(0,c.mapState)("m_settings",["headNavi","roadContent","isShowModal"])),(0,c.mapState)("m_roadMsg",["activePoint","roadList","pointList","allPointList","road"])),(0,c.mapState)("m_user",["userPosition","token","userinfo"])),{},{normalList:function(){return(0,u.getSwiperList)(this.swiperList,{circular:this.circular,plus:this.plus})}}),watch:{activePoint:function(t,n){this.moveToLocation(this.staticRoad.roadList[t])}},data:function(){return{pointCrowds:50,isGetLocation:!1,isShowRoadContent:!1,_mapContext:"",polyline:[],staticRoad:{},position:{},notice:"uni-app 版正式发布，开发一次，同时发布iOS、Android、H5、微信小程序",options:{primary:"http://store.is.autonavi.com/showpic/7bd14f6913f7e2bb18f0d11672e4e5af,http://store.is.autonavi.com/showpic/ed132a4469bd154c29b39ea37014a823,http://store.is.autonavi.com/showpic/737884c8bb1a3fcf67e334f8d2a17913",paybak:"白鹿洞书院",txt:"详情",score:"5.0",desc:"糟糕的星期三！通常用于演示",side:"/static/hm-sms-list-card/images/img_25832_0_0.png"},checkPointList:[]}},onLoad:function(t){"true"===t.showStaticRoad?this.getStaticRoad(t.staticRoadId):t.showStaticRoad},onReady:function(){this._mapContext=t.createMapContext("map",this),this._mapContext.initMarkerCluster({enableDefaultStyle:!1,zoomOnClick:!0,gridSize:40}),this.setMapBoundary({longitude:115.955964,latitude:29.493921},{longitude:116.055004,latitude:29.57655}),this.addMarkers(),this.addGroundOverlay()},methods:d(d(d(d({},(0,c.mapMutations)("m_roadMsg",["saveActivePointToStorage","updateActivePoint","updatePointList"])),(0,c.mapMutations)("m_settings",["updateIsShowModal"])),(0,c.mapMutations)("m_user",["saveUserPositionToStorage","updateUserPosition"])),{},{getStaticRoad:function(t){var n=this,e=this;r.default.getStaticRoadById(t).then((function(t){n.staticRoad=t.data,n.$refs.roadMsg.open();for(var o=function(t){var o={},i={};o="三叠泉"===n.staticRoad.roadList[t+1].name?{longitude:"116.024443",latitude:"29.560302"}:{longitude:n.staticRoad.roadList[t+1].longitude,latitude:n.staticRoad.roadList[t+1].latitude},i="三叠泉"===n.staticRoad.roadList[t].name?{longitude:"116.024443",latitude:"29.560302"}:{longitude:n.staticRoad.roadList[t].longitude,latitude:n.staticRoad.roadList[t].latitude},setTimeout((function(){e.addPointPolyline(i,o)}),1e4*(t/4-1))},i=0;i<n.staticRoad.roadList.length-1;i++)o(i)}))},dialogInputConfirm:function(t){console.log(t),this.$refs.inputDialog.close()},calculateDistance:function(t,n){h.calculateDistance({mode:"straight",from:"",to:n,success:function(t){console.log(t);t=t.result;for(var n=[],e=0;e<t.elements.length;e++)n.push(t.elements[e].distance)}})},addPointPolyline:function(t,n){var e=this;h.direction({mode:"walking",from:t,to:n,success:function(t){console.log(t.result.routes[0]);for(var n=t.result.routes[0].polyline,o=[],i=2;i<n.length;i++)n[i]=Number(n[i-2])+Number(n[i])/1e6;for(i=0;i<n.length;i+=2)o.push({latitude:n[i],longitude:n[i+1]});e.addPolyline(o)}})},addPolyline:function(t){this.polyline.push({points:t,color:"#47a6ff",width:5,arrowLine:!0,borderWidth:1})},scanBtn:function(){var n=this;t.scanCode({success:function(e){n.$refs.inputDialog.open(),t.showToast({title:"条码类型："+e.scanType,duration:2e3}),t.showToast({title:"条码内容："+e.result,duration:2e3})}})},moveToLocation:function(t){console.log(t),this._mapContext.moveToLocation({longitude:parseFloat(t.longitude),latitude:parseFloat(t.latitude)}),this._mapContext.setLocMarkerIcon({iconPath:"../../static/place_icons/locPosition.png"})},toPointDetail:function(){t.navigateTo({url:"/subpkg/sub_pointDetail/sub_pointDetail"})},clickCard:function(n){t.navigateTo({url:"/subpkg/sub_pointDetail/sub_pointDetail"}),console.log("onClick")},selectChange2:function(){},searchEvent:function(t){console.log("查询事件参数",t)},switchSpot:function(t){this.updateActivePoint(t)},change:function(){this.activePoint<this.pointList.length-1?this.activePoint+=1:this.activePoint=0},trigger:function(t){!1===this.roadContent[t.index].activePoint&&(this.roadContent.forEach((function(t){t.activePoint=!1})),this.roadContent[t.index].activePoint=!t.item.activePoint),this.$refs.roadMsg.open(),this.$refs.fab.changeHide()},pageTabL:function(){var n=this;return(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.isGetLocation=!0,e.next=3,t.getFuzzyLocation({success:function(t){var n={latitude:t.latitude,longitude:t.longitude};this.position=n,console.log(this.position)}});case 3:({latitude:29.544848146792017,longitude:116.00750014637356}),t.showToast({title:"点击地图设置您当前位置",duration:2e3,icon:"none"});case 5:case"end":return e.stop()}}),e)})))()},pageTabML:function(){console.log("pageTabML"),t.navigateTo({url:"/subpkg/sub_addToGroup/sub_addToGroup"})},pageTabMM:function(){t.navigateTo({url:"/subpkg/sub_message/sub_message"})},pageTabMR:function(){this.updateIsShowModal("true")},closeDrawer:function(t){this.$refs[t].close()},feedback:function(t){console.log(t)},addMarkers:function(){var t=this,n=[];this.allPointList.forEach((function(e,o){n.push({id:e.id,title:e.name,latitude:e.latitude,longitude:e.longitude,joinCluster:!0,iconPath:"../../static/place_icons/place02.png",width:25,height:25,anchor:{x:.5,y:.5},callout:{content:e.name,color:"#666",borderRadius:5,bgColor:t.pointCrowds>70?"#f0a1a8":"#ffffff",padding:5,textAlign:"center",display:"ALWAYS"}})})),this._mapContext.addMarkers({markers:n,clear:!1,complete:function(t){console.log("addMarkers",t)}})},addGroundOverlay:function(){this._mapContext.addGroundOverlay({id:1,src:"https://i.328888.xyz/2023/03/25/iAjKKQ.png",bounds:{southwest:{longitude:115.955964,latitude:29.493921},northeast:{longitude:116.055004,latitude:29.57655}}}),this._mapContext.addGroundOverlay({id:2,src:p,bounds:{southwest:{longitude:115.955964,latitude:29.57655},northeast:{longitude:116.055004,latitude:29.62655}}}),this._mapContext.addGroundOverlay({id:3,src:p,bounds:{southwest:{longitude:115.955964,latitude:29.443921},northeast:{longitude:116.055004,latitude:29.493921}}})},markertap:function(t){console.log("你点击的标记点ID是:"+t.detail.markerId);var n=this.allPointList.find((function(n){return n.id===t.detail.markerId}));console.log(n),this.options={primary:n.imgsUrl,paybak:n.name,txt:"详情",score:n.score,side:"/static/hm-sms-list-card/images/img_25832_0_0.png"},this.$refs.popupHi.open()},tapMap:function(t){this.viewshow=!1,console.log("点击返回经纬度:",t.detail),this.position=t.detail},setMapBoundary:function(t,n){var e=this;this._mapContext.setBoundary({southwest:t,northeast:n,success:function(o){e._mapContext.moveToLocation({latitude:(t.latitude+n.latitude)/2,longitude:(t.longitude+n.longitude)/2,scale:15})}})}})};n.default=m}).call(this,e("543d")["default"])},d888:function(t,n,e){"use strict";e.r(n);var o=e("cd0f"),i=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=i.a},fc32:function(t,n,e){"use strict";var o=e("2d59"),i=e.n(o);i.a}},[["4422","common/runtime","common/vendor"]]]);